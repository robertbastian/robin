<% @title = 'Dashboard | Robin' %>

<div class="container">
	<div class="row">
		<h1>Dashboard</h1>
	</div>
	<hr />
	<div class="row">
		<div class="col-md-6">
			<div class="panel panel-default">
			  	<div class="panel-heading">
				    <h3 class="panel-title">Current Challenge</h3>
				</div>
				<div class="panel-body">
					<% if active_problem? %>
						Click <%= link_to  'here', problem_url(most_recent_problem) %> to go to the most recent challenge, <%= most_recent_problem.title %>, which was added by <%= link_to most_recent_problem.author.name, most_recent_problem.author %>
						<br><%= link_to 'Write solution', new_problem_solution_path(@most_recent_problem), class: 'btn btn-info btn-primary' %>
					<% else %>
						<!-- <p>No current problem</p> -->
						<% if !@most_recent_problem %>
							Currently, no challenge has been set. Maybe you should create one?<br /><br />
							<%= link_to 'Click here to do so.', new_problem_url, class: 'btn btn-default btn-primary' %>
						<% elsif @most_recent_problem.winner == current_user %>
							Congratulations on winning the last challenge! You now need to set a challenge for everybody else.<br /><br />
							<%= link_to 'Click here to do so.', new_problem_url, class: 'btn btn-default btn-primary' %>
						<% elsif @most_recent_problem.winner == nil %>
							The last challenge has not yet been graded by <%= @most_recent_problem.author.name %>. Remind him to do it soon, so the next round can begin!
						<% else %>
							<%= @most_recent_problem.winner.name%> won the last challenge. Remind him to set the next one soon!
						<% end %>
					<% end %>
				</div>
			</div>
<!-- 			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title"></h3>
				</div>
				<div class="panel-body">
				</div>
			</div> -->
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">My Profile</h3>
				</div>
				<div class="panel-body">
				Information from profile
				</div>
			</div>
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Leaderboard</h3>
				</div>
				<table class="table panel-body">
				<tr><th>#</th><th>Name</th><th>Points</th>
				<% i = 0; @leaders.each do |user| %>
				<tr><td><%= i = i+1; i %></td><td><%=link_to user.name, user%></td><td><%=user.score%></td></tr>
				<% end %>
  				</table>
			</div>
		</div>

		<div class="col-md-6">

			<div class="panel panel-default">
				<div class="panel-body row">
					<div class='col-xs-6 col-xs-offset-3'><%= image_tag("robin_justbird_square.PNG", class: "img-responsive",alt: "") %>
				</div></div>
			</div>
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Your score</h3>
				</div>
				<div class="panel-body">
					<h1><%= current_user.score %> points</h1>
				</div>
			</div>
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">FAQ</h3>
				</div>
				<div class="panel-body">
					Have you taken a moment to read through the FAQ? Check it out and find out the best way to get the most out of <span class="smallcaps">ROBIN</span>.
				</div>
			</div>
		</div>
	</div>
</div>
